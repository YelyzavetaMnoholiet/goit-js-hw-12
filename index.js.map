{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46912917-fb92bedb7f4b4973c6d37e29f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchData(query, page, perPage) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n","export function createMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL: smallImg,\n        largeImageURL: bigImg,\n        tags: alt,\n        likes = 0,\n        views = 0,\n        comments = '',\n        downloads = 0,\n      }) => {\n        return `\n      <div class=\"images-gallery\">\n                <div class=\"loader\" style=\"display: block;\"></div> \n                <a href=\"${bigImg}\">\n                    <img src=\"${smallImg}\" alt=\"${alt}\" />\n                </a>\n                <div class=\"content\">\n                    <div><p>Likes</p><span>${likes}</span></div>\n                    <div><p>Views</p><span>${views}</span></div>\n                    <div><p>Comments</p><span>${comments}</span></div>\n                    <div><p>Downloads</p><span>${downloads}</span></div>\n                </div>\n            </div>\n      `;\n      }\n    )\n    .join('');\n}\n\nexport function setupImageLoadHandlers(container) {\n  const images = container.querySelectorAll('.images-gallery img');\n  images.forEach(img => {\n    const loader = img.closest('.images-gallery').querySelector('.loader');\n    img.onload = () => {\n      loader.style.display = 'none';\n    };\n    img.onerror = () => {\n      loader.style.display = 'none';\n    };\n  });\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchData } from './js/pixabay-api';\nimport { createMarkup, setupImageLoadHandlers } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst container = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('load-more');\nlet lightbox = null;\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 15;\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  container.innerHTML = '';\n  page = 1;\n  searchQuery = event.target.elements.textName.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.warning({\n      title: 'Hey',\n      message: 'You forgot important data',\n      color: 'red',\n    });\n    return;\n  }\n\n  await loadImages();\n}\n\nasync function loadImages() {\n  try {\n    const data = await fetchData(searchQuery, page, perPage);\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Sorry',\n        message: 'No images found. Try a different search!',\n        color: 'orange',\n      });\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n\n    container.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    setupImageLoadHandlers(container);\n\n    if (lightbox) {\n      lightbox.refresh();\n    } else {\n      lightbox = new SimpleLightbox('.gallery .images-gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    }\n\n    if (page * perPage >= data.totalHits) {\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n      });\n      loadMoreBtn.style.display = 'none';\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Fetch error: ${error.message}`,\n      color: 'red',\n    });\n  }\n}\n\nfunction loadMoreImages() {\n  page += 1;\n  loadImages();\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchData","query","page","perPage","params","axios","createMarkup","array","smallImg","bigImg","alt","likes","views","comments","downloads","setupImageLoadHandlers","container","img","loader","form","loadMoreBtn","lightbox","searchQuery","handleSearch","loadMoreImages","event","iziToast","loadImages","data","SimpleLightbox","smoothScroll","error","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAUC,EAAOC,EAAMC,EAAS,CACpD,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACd,EAEE,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IAClB,CCjBO,SAASE,EAAaC,EAAO,CAClC,OAAOA,EACJ,IACC,CAAC,CACC,aAAcC,EACd,cAAeC,EACf,KAAMC,EACN,MAAAC,EAAQ,EACR,MAAAC,EAAQ,EACR,SAAAC,EAAW,GACX,UAAAC,EAAY,CACpB,IACe;AAAA;AAAA;AAAA,2BAGYL,CAAM;AAAA,gCACDD,CAAQ,UAAUE,CAAG;AAAA;AAAA;AAAA,6CAGRC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA;AAAA,OAKrD,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAuBC,EAAW,CACjCA,EAAU,iBAAiB,qBAAqB,EACxD,QAAQC,GAAO,CACpB,MAAMC,EAASD,EAAI,QAAQ,iBAAiB,EAAE,cAAc,SAAS,EACrEA,EAAI,OAAS,IAAM,CACjBC,EAAO,MAAM,QAAU,MAC7B,EACID,EAAI,QAAU,IAAM,CAClBC,EAAO,MAAM,QAAU,MAC7B,CACA,CAAG,CACH,CCjCA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCH,EAAY,SAAS,cAAc,UAAU,EAC7CI,EAAc,SAAS,eAAe,WAAW,EACvD,IAAIC,EAAW,KACXC,EAAc,GACdpB,EAAO,EACX,MAAMC,EAAU,GAEhBgB,EAAK,iBAAiB,SAAUI,CAAY,EAC5CH,EAAY,iBAAiB,QAASI,CAAc,EAEpD,eAAeD,EAAaE,EAAO,CAMjC,GALAA,EAAM,eAAc,EACpBT,EAAU,UAAY,GACtBd,EAAO,EACPoB,EAAcG,EAAM,OAAO,SAAS,SAAS,MAAM,OAE/CH,IAAgB,GAAI,CACtBI,EAAS,QAAQ,CACf,MAAO,MACP,QAAS,4BACT,MAAO,KACb,CAAK,EACD,MACD,CAED,MAAMC,EAAU,CAClB,CAEA,eAAeA,GAAa,CAC1B,GAAI,CACF,MAAMC,EAAO,MAAM5B,EAAUsB,EAAapB,EAAMC,CAAO,EAEvD,GAAIyB,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,2CACT,MAAO,QACf,CAAO,EACDN,EAAY,MAAM,QAAU,OAC5B,MACD,CAEDJ,EAAU,mBAAmB,YAAaV,EAAasB,EAAK,IAAI,CAAC,EACjEb,EAAuBC,CAAS,EAE5BK,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIQ,EAAe,6BAA8B,CAC1D,aAAc,MACd,aAAc,GACtB,CAAO,EAGC3B,EAAOC,GAAWyB,EAAK,WACzBF,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,MAAO,MACf,CAAO,EACDN,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,QAG9BU,GACD,OAAQC,EAAO,CACdL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gBAAgBK,EAAM,OAAO,GACtC,MAAO,KACb,CAAK,CACF,CACH,CAEA,SAASP,GAAiB,CACxBtB,GAAQ,EACRyB,GACF,CAEA,SAASG,GAAe,CACtB,KAAM,CAAE,OAAQE,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}